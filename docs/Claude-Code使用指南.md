# Claude Code 使用指南

## 📖 什么是 Claude Code?

Claude Code 是 Anthropic 官方的命令行工具,可以在终端中与 Claude 对话,并通过 MCP (Model Context Protocol) 调用外部工具。

## 🚀 快速开始

### 1. 配置 MCP

使用 Claude Code 内置命令配置(最简单的方法):

```bash
claude mcp add -s user wechat-search \
  "/Users/rick/Documents/AI产品开发/微信文章搜索摘要MCP/.venv/bin/python" \
  "/Users/rick/Documents/AI产品开发/微信文章搜索摘要MCP/mcp_server.py"
```

**验证配置成功**:

```bash
claude mcp list
```

应该看到:
```
wechat-search: /Users/rick/Documents/AI产品开发/微信文章搜索摘要MCP/.venv/bin/python /Users/rick/Documents/AI产品开发/微信文章搜索摘要MCP/mcp_server.py
```

**说明**:
- `-s user` 表示用户级配置,在所有项目中生效
- 使用虚拟环境的 Python 路径
- 必须使用绝对路径

**其他配置方式**:

如果只想在特定项目使用:
```bash
cd ~/my-project
claude mcp add -s project wechat-search "/path/to/python" "/path/to/mcp_server.py"
```

### 2. 启动 Claude Code

```bash
# 直接启动
claude

# 启动时会看到:
# ✓ Connected to MCP server wechat-search
```

### 3. 开始使用

#### 示例 1: 简单搜索

```
> 搜索关于人工智能的微信文章
```

**Claude 的工作流程**:
1. 识别需要搜索微信文章
2. 调用 MCP 工具: `search_wechat_articles("人工智能", count=3)`
3. 获取 3 篇文章的完整内容
4. 分析并生成总结

**预期输出**:
```
我找到了 3 篇关于人工智能的微信文章,主要内容包括:

1. **国家"十五五"AI王炸文件出炉!** 
   - 公众号: 猫猫老师
   - 主要讨论国家AI战略和未来5年发展路径
   - 链接: https://mp.weixin.qq.com/...

2. **"人工智能与中文学科建设"学术研讨会**
   - 公众号: 宁波大学人文与传媒学院
   - 探讨AI在中文教育领域的应用
   - 链接: https://mp.weixin.qq.com/...

3. ...

## 主要观点总结:
[Claude 会自动分析文章内容并总结]
```

#### 示例 2: 指定数量

```
> 搜索"大模型应用"相关的文章,获取 5 篇
```

Claude 会搜索并分析 5 篇文章。

#### 示例 3: 特定分析角度

```
> 搜索区块链监管的文章,从政策角度分析主要趋势
```

Claude 会:
1. 搜索相关文章
2. 专门从政策角度进行分析
3. 提取趋势和关键信息

#### 示例 4: 多轮对话

```
> 搜索关于Claude MCP的文章

[Claude 返回结果]

> 这些文章提到了哪些具体的MCP工具?

[Claude 从已获取内容中提取信息]

> 第一篇文章的公众号还写过哪些类似主题的内容?

[Claude 可以建议搜索该公众号的其他文章]
```

## 💡 使用技巧

### 1. 明确搜索意图

❌ 不好的提问:
```
> 告诉我关于AI的信息
```

✅ 好的提问:
```
> 搜索关于AI在医疗领域应用的微信文章
```

### 2. 指定文章数量

```
> 搜索"元宇宙"相关文章,获取 5 篇
> 找 3 篇关于Web3的文章
```

### 3. 添加分析维度

```
> 搜索关于ChatGPT的文章,对比不同观点
> 搜索AI伦理的文章,总结主要争议点
> 搜索量子计算的文章,提取技术突破点
```

### 4. 充分利用多轮对话

```
> 搜索关于AIGC的文章

> 这些文章中提到的最热门的应用是什么?

> 帮我详细解释第二篇文章的核心观点

> 这些观点有数据支撑吗?
```

## 🔍 验证 MCP 是否工作

### 方法 1: 直接测试

```
> 搜索关于AI的文章
```

如果 Claude 开始搜索,说明 MCP 正常工作。

### 方法 2: 查询工具列表

```
> 你有哪些可用的工具?
> 列出可用的MCP工具
```

Claude 应该提到 `search_wechat_articles` 工具。

### 方法 3: 查看启动日志

```bash
claude

# 看到这个就说明成功:
# ✓ Connected to MCP server wechat-search
```

## 🛠️ 常见问题

### Q1: Claude Code 说没有找到工具?

**原因**: MCP 配置未生效

**解决**:
1. 检查配置文件路径是否正确
2. 重启 Claude Code
3. 使用全局配置而非项目配置

### Q2: 搜索返回空结果?

**原因**: 
- 关键词太宽泛或太生僻
- 网络问题
- 反爬虫临时拦截

**解决**:
- 更换关键词
- 稍后重试
- 尝试搜索热门话题

### Q3: 文章内容显示"无法提取"?

**原因**: 反爬虫机制触发

**说明**: 
- v1.1 版本已优化,成功率大幅提升
- 即使无法抓取内容,仍会返回标题、公众号、摘要和链接
- 可以手动点击链接查看原文

### Q4: 如何停止 Claude Code?

```bash
# 按下
Ctrl + C

# 或输入
/exit
```

### Q5: 配置文件路径在哪里?

- **macOS/Linux**: `~/.config/claude/settings.json`
- **项目级**: 当前目录的 `CLAUDE.md`

## 📚 更多示例

### 技术调研

```
> 搜索关于Rust编程语言的最新文章,总结主要趋势
```

### 行业分析

```
> 搜索"新能源汽车"相关文章,分析市场动态
```

### 学习资源

```
> 搜索Python入门教程相关的文章,推荐适合初学者的
```

### 舆情监控

```
> 搜索"碳中和"政策相关文章,总结政府态度
```

## 🎯 最佳实践

1. **使用全局配置**: 避免每个项目都配置一次
2. **明确搜索词**: 提高搜索准确率
3. **利用多轮对话**: 深入挖掘信息
4. **查看原文链接**: 验证信息准确性
5. **合理控制数量**: 3-5篇文章通常足够

## 📞 获取帮助

- 项目文档: `README.md`
- 测试报告: `测试报告.md`
- 更新日志: `更新日志.md`

---

**准备好了吗?** 现在就启动 Claude Code 试试吧!

```bash
claude
> 搜索关于AI的微信文章
```
